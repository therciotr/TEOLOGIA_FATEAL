import{r as o,j as e,B as f,e as S,u as w,S as E,t as j}from"./index-B0H5DF4B.js";import{g as F,u as A}from"./alunos-BafIxmKx.js";import{N as C}from"./Navbar-Cg0sjEiK.js";const P=({aluno:t,onSave:i,onCancel:c})=>{const[n,h]=o.useState({nome:t?.nome||"",email:t?.email||"",telefone:t?.telefone||"",endereco:t?.endereco||"",rg:t?.rg||"",turmaId:t?.turmaId||"",matriculaPaga:t?.matriculaPaga||!1}),[m,x]=o.useState(null),[u,p]=o.useState(null),[d,l]=o.useState(t?.fotoUrl||null),g=a=>{const{name:s,value:r,type:b,checked:k}=a.target;h({...n,[s]:b==="checkbox"?k:r})},y=a=>{const s=a.target.files?.[0]||null;if(x(s),s){const r=new FileReader;r.onloadend=()=>l(r.result),r.readAsDataURL(s)}else l(null)},N=a=>{p(a.target.files)},v=a=>{a.preventDefault();const s=new FormData;Object.entries(n).forEach(([r,b])=>s.append(r,b.toString())),m&&s.append("foto",m),u&&Array.from(u).forEach(r=>s.append("documentos",r)),i(s)};return e.jsxs("form",{onSubmit:v,className:"space-y-4 bg-white dark:bg-slate-800 rounded p-4 shadow",children:[[{label:"Nome",name:"nome",type:"text",required:!0},{label:"Email",name:"email",type:"email",required:!0},{label:"Telefone",name:"telefone",type:"text"},{label:"Endereço",name:"endereco",type:"text"},{label:"RG",name:"rg",type:"text"},{label:"Turma",name:"turmaId",type:"text"}].map(a=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:a.name,className:"block font-medium mb-1",children:a.label}),e.jsx("input",{type:a.type,name:a.name,id:a.name,value:n[a.name],onChange:g,required:a.required,className:"border rounded px-3 py-2 w-full dark:bg-slate-700 dark:text-white"})]},a.name)),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"matriculaPaga",className:"block font-medium mb-1",children:"Matrícula Paga"}),e.jsx("input",{type:"checkbox",name:"matriculaPaga",id:"matriculaPaga",checked:n.matriculaPaga,onChange:g,className:"mr-2"}),e.jsx("span",{children:n.matriculaPaga?"Sim":"Não"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Foto 3x4"}),d&&e.jsx("img",{src:d,alt:"Foto do aluno",className:"w-24 h-24 rounded mb-2 object-cover border"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"border rounded px-3 py-2 w-full dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Documentos"}),e.jsx("input",{type:"file",multiple:!0,onChange:N,className:"border rounded px-3 py-2 w-full dark:bg-slate-700"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c&&e.jsx(f,{type:"button",variant:"secondary",onClick:c,children:"Cancelar"}),e.jsx(f,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Salvar"})]})]})},z=()=>{const{id:t}=S(),i=w(),[c,n]=o.useState(null),[h,m]=o.useState(!1),[x,u]=o.useState(null);o.useEffect(()=>{t&&(async()=>{m(!0),u(null);try{const l=await F(t);n(l.data)}catch(l){console.error("Erro ao buscar aluno:",l),u("Erro ao carregar aluno.")}finally{m(!1)}})()},[t]);const p=async d=>{try{await A(t,d),j.success("Aluno atualizado com sucesso!"),i("/alunos")}catch(l){console.error("Erro ao atualizar aluno:",l),j.error("Erro ao atualizar aluno.")}};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-slate-900",children:[e.jsx(C,{}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx(E,{}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:"Editar Aluno"}),h&&e.jsx("p",{className:"text-slate-600",children:"Carregando aluno..."}),x&&e.jsx("p",{className:"text-red-500",children:x}),c&&e.jsx(P,{aluno:c,onSave:p,onCancel:()=>i("/alunos")})]})]})]})};export{z as default};
