{"version":3,"file":"editar-CoHFY9Lh.js","sources":["../../src/components/AlunoForm.tsx","../../src/pages/alunos/editar.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Aluno } from \"@/types/Aluno\";\n\ninterface AlunoFormProps {\n  aluno?: Aluno;\n  onSave: (formData: FormData) => void;\n  onCancel?: () => void;\n}\n\nconst AlunoForm: React.FC<AlunoFormProps> = ({ aluno, onSave, onCancel }) => {\n  const [formData, setFormData] = useState({\n    nome: aluno?.nome || \"\",\n    email: aluno?.email || \"\",\n    telefone: aluno?.telefone || \"\",\n    endereco: aluno?.endereco || \"\",\n    rg: aluno?.rg || \"\",\n    turmaId: aluno?.turmaId || \"\",\n    matriculaPaga: aluno?.matriculaPaga || false,\n  });\n\n  const [foto, setFoto] = useState<File | null>(null);\n  const [documentos, setDocumentos] = useState<FileList | null>(null);\n  const [previewFoto, setPreviewFoto] = useState<string | null>(aluno?.fotoUrl || null);\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const { name, value, type, checked } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === \"checkbox\" ? checked : value,\n    });\n  };\n\n  const handleFotoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0] || null;\n    setFoto(file);\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreviewFoto(reader.result as string);\n      reader.readAsDataURL(file);\n    } else {\n      setPreviewFoto(null);\n    }\n  };\n\n  const handleDocumentosChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setDocumentos(e.target.files);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    const data = new FormData();\n    Object.entries(formData).forEach(([key, value]) =>\n      data.append(key, value.toString())\n    );\n\n    if (foto) data.append(\"foto\", foto);\n    if (documentos) {\n      Array.from(documentos).forEach((file) =>\n        data.append(\"documentos\", file)\n      );\n    }\n\n    onSave(data);\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"space-y-4 bg-white dark:bg-slate-800 rounded p-4 shadow\"\n    >\n      {/** Campos principais */}\n      {[\n        { label: \"Nome\", name: \"nome\", type: \"text\", required: true },\n        { label: \"Email\", name: \"email\", type: \"email\", required: true },\n        { label: \"Telefone\", name: \"telefone\", type: \"text\" },\n        { label: \"Endereço\", name: \"endereco\", type: \"text\" },\n        { label: \"RG\", name: \"rg\", type: \"text\" },\n        { label: \"Turma\", name: \"turmaId\", type: \"text\" },\n      ].map((field) => (\n        <div key={field.name}>\n          <label htmlFor={field.name} className=\"block font-medium mb-1\">\n            {field.label}\n          </label>\n          <input\n            type={field.type}\n            name={field.name}\n            id={field.name}\n            value={(formData as any)[field.name]}\n            onChange={handleChange}\n            required={field.required}\n            className=\"border rounded px-3 py-2 w-full dark:bg-slate-700 dark:text-white\"\n          />\n        </div>\n      ))}\n\n      {/** Matrícula paga */}\n      <div>\n        <label htmlFor=\"matriculaPaga\" className=\"block font-medium mb-1\">\n          Matrícula Paga\n        </label>\n        <input\n          type=\"checkbox\"\n          name=\"matriculaPaga\"\n          id=\"matriculaPaga\"\n          checked={formData.matriculaPaga}\n          onChange={handleChange}\n          className=\"mr-2\"\n        />\n        <span>{formData.matriculaPaga ? \"Sim\" : \"Não\"}</span>\n      </div>\n\n      {/** Foto do aluno */}\n      <div>\n        <label className=\"block font-medium mb-1\">Foto 3x4</label>\n        {previewFoto && (\n          <img\n            src={previewFoto}\n            alt=\"Foto do aluno\"\n            className=\"w-24 h-24 rounded mb-2 object-cover border\"\n          />\n        )}\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleFotoChange}\n          className=\"border rounded px-3 py-2 w-full dark:bg-slate-700\"\n        />\n      </div>\n\n      {/** Documentos */}\n      <div>\n        <label className=\"block font-medium mb-1\">Documentos</label>\n        <input\n          type=\"file\"\n          multiple\n          onChange={handleDocumentosChange}\n          className=\"border rounded px-3 py-2 w-full dark:bg-slate-700\"\n        />\n      </div>\n\n      {/** Botões */}\n      <div className=\"flex justify-end gap-2 mt-4\">\n        {onCancel && (\n          <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\n            Cancelar\n          </Button>\n        )}\n        <Button type=\"submit\" className=\"bg-blue-600 hover:bg-blue-700\">\n          Salvar\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default AlunoForm;","import React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { getAluno, updateAluno } from \"@/services/alunos\";\nimport Navbar from \"@/components/Navbar\";\nimport Sidebar from \"@/components/Sidebar\";\nimport AlunoForm from \"@/components/AlunoForm\";\nimport { toast } from \"sonner\";\nimport { Aluno } from \"@/types/Aluno\";\n\n/**\n * Página para editar um aluno existente.\n * Busca os dados pelo ID da URL e exibe formulário com os dados preenchidos.\n */\nconst EditarAluno: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [aluno, setAluno] = useState<Aluno | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [erro, setErro] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchAluno = async () => {\n      setLoading(true);\n      setErro(null);\n      try {\n        const response = await getAluno(id!);\n        setAluno(response.data);\n      } catch (error) {\n        console.error(\"Erro ao buscar aluno:\", error);\n        setErro(\"Erro ao carregar aluno.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (id) {\n      fetchAluno();\n    }\n  }, [id]);\n\n  /**\n   * Envia os dados atualizados do aluno para a API.\n   */\n  const handleSave = async (formData: FormData) => {\n    try {\n      await updateAluno(id!, formData);\n      toast.success(\"Aluno atualizado com sucesso!\");\n      navigate(\"/alunos\");\n    } catch (error) {\n      console.error(\"Erro ao atualizar aluno:\", error);\n      toast.error(\"Erro ao atualizar aluno.\");\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-gray-50 dark:bg-slate-900\">\n      {/* Topbar */}\n      <Navbar />\n\n      <div className=\"flex flex-1\">\n        {/* Sidebar */}\n        <Sidebar />\n\n        {/* Conteúdo principal */}\n        <main className=\"flex-1 p-6\">\n          <h1 className=\"text-2xl font-bold mb-4 text-gray-800 dark:text-white\">\n            Editar Aluno\n          </h1>\n\n          {/* Estado de carregamento ou erro */}\n          {loading && <p className=\"text-slate-600\">Carregando aluno...</p>}\n          {erro && <p className=\"text-red-500\">{erro}</p>}\n\n          {/* Formulário com dados carregados */}\n          {aluno && (\n            <AlunoForm\n              aluno={aluno}\n              onSave={handleSave}\n              onCancel={() => navigate(\"/alunos\")}\n            />\n          )}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default EditarAluno;"],"names":["AlunoForm","aluno","onSave","onCancel","formData","setFormData","useState","foto","setFoto","documentos","setDocumentos","previewFoto","setPreviewFoto","handleChange","e","name","value","type","checked","handleFotoChange","file","reader","handleDocumentosChange","handleSubmit","data","key","jsxs","field","jsx","Button","EditarAluno","id","useParams","navigate","useNavigate","setAluno","loading","setLoading","erro","setErro","useEffect","response","getAluno","error","handleSave","updateAluno","toast","Navbar","Sidebar"],"mappings":"2KAUA,MAAMA,EAAsC,CAAC,CAAE,MAAAC,EAAO,OAAAC,EAAQ,SAAAC,KAAe,CAC3E,KAAM,CAACC,EAAUC,CAAW,EAAIC,WAAS,CACvC,KAAML,GAAO,MAAQ,GACrB,MAAOA,GAAO,OAAS,GACvB,SAAUA,GAAO,UAAY,GAC7B,SAAUA,GAAO,UAAY,GAC7B,GAAIA,GAAO,IAAM,GACjB,QAASA,GAAO,SAAW,GAC3B,cAAeA,GAAO,eAAiB,EAAA,CACxC,EAEK,CAACM,EAAMC,CAAO,EAAIF,EAAAA,SAAsB,IAAI,EAC5C,CAACG,EAAYC,CAAa,EAAIJ,EAAAA,SAA0B,IAAI,EAC5D,CAACK,EAAaC,CAAc,EAAIN,EAAAA,SAAwBL,GAAO,SAAW,IAAI,EAE9EY,EACJC,GACG,CACH,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,KAAAC,EAAM,QAAAC,CAAA,EAAYJ,EAAE,OACzCT,EAAY,CACV,GAAGD,EACH,CAACW,CAAI,EAAGE,IAAS,WAAaC,EAAUF,CAAA,CACzC,CAAA,EAGGG,EAAoBL,GAA2C,CACnE,MAAMM,EAAON,EAAE,OAAO,QAAQ,CAAC,GAAK,KAEpC,GADAN,EAAQY,CAAI,EACRA,EAAM,CACR,MAAMC,EAAS,IAAI,WACnBA,EAAO,UAAY,IAAMT,EAAeS,EAAO,MAAgB,EAC/DA,EAAO,cAAcD,CAAI,CAAA,MAEzBR,EAAe,IAAI,CACrB,EAGIU,EAA0BR,GAA2C,CACzEJ,EAAcI,EAAE,OAAO,KAAK,CAAA,EAGxBS,EAAgBT,GAAuB,CAC3CA,EAAE,eAAA,EAEF,MAAMU,EAAO,IAAI,SACjB,OAAO,QAAQpB,CAAQ,EAAE,QAAQ,CAAC,CAACqB,EAAKT,CAAK,IAC3CQ,EAAK,OAAOC,EAAKT,EAAM,SAAA,CAAU,CAAA,EAG/BT,GAAMiB,EAAK,OAAO,OAAQjB,CAAI,EAC9BE,GACF,MAAM,KAAKA,CAAU,EAAE,QAASW,GAC9BI,EAAK,OAAO,aAAcJ,CAAI,CAAA,EAIlClB,EAAOsB,CAAI,CAAA,EAGb,OACEE,EAAAA,KAAC,OAAA,CACC,SAAUH,EACV,UAAU,0DAGT,SAAA,CAAA,CACC,CAAE,MAAO,OAAQ,KAAM,OAAQ,KAAM,OAAQ,SAAU,EAAA,EACvD,CAAE,MAAO,QAAS,KAAM,QAAS,KAAM,QAAS,SAAU,EAAA,EAC1D,CAAE,MAAO,WAAY,KAAM,WAAY,KAAM,MAAA,EAC7C,CAAE,MAAO,WAAY,KAAM,WAAY,KAAM,MAAA,EAC7C,CAAE,MAAO,KAAM,KAAM,KAAM,KAAM,MAAA,EACjC,CAAE,MAAO,QAAS,KAAM,UAAW,KAAM,MAAA,CAAO,EAChD,IAAKI,UACJ,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,SAAM,QAASD,EAAM,KAAM,UAAU,yBACnC,WAAM,KAAA,CACT,EACAC,EAAAA,IAAC,QAAA,CACC,KAAMD,EAAM,KACZ,KAAMA,EAAM,KACZ,GAAIA,EAAM,KACV,MAAQvB,EAAiBuB,EAAM,IAAI,EACnC,SAAUd,EACV,SAAUc,EAAM,SAChB,UAAU,mEAAA,CAAA,CACZ,GAZQA,EAAM,IAahB,CACD,SAGA,MAAA,CACC,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,gBAAgB,UAAU,yBAAyB,SAAA,iBAElE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,KAAK,gBACL,GAAG,gBACH,QAASxB,EAAS,cAClB,SAAUS,EACV,UAAU,MAAA,CAAA,EAEZe,EAAAA,IAAC,OAAA,CAAM,SAAAxB,EAAS,cAAgB,MAAQ,KAAA,CAAM,CAAA,EAChD,SAGC,MAAA,CACC,SAAA,CAAAwB,EAAAA,IAAC,QAAA,CAAM,UAAU,yBAAyB,SAAA,WAAQ,EACjDjB,GACCiB,EAAAA,IAAC,MAAA,CACC,IAAKjB,EACL,IAAI,gBACJ,UAAU,4CAAA,CAAA,EAGdiB,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAUT,EACV,UAAU,mDAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAS,EAAAA,IAAC,QAAA,CAAM,UAAU,yBAAyB,SAAA,aAAU,EACpDA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,SAAQ,GACR,SAAUN,EACV,UAAU,mDAAA,CAAA,CACZ,EACF,EAGAI,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAvB,GACCyB,EAAAA,IAACC,GAAO,KAAK,SAAS,QAAQ,YAAY,QAAS1B,EAAU,SAAA,UAAA,CAE7D,QAED0B,EAAA,CAAO,KAAK,SAAS,UAAU,gCAAgC,SAAA,QAAA,CAEhE,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAGN,EChJMC,EAAwB,IAAM,CAClC,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACTC,EAAWC,EAAA,EACX,CAACjC,EAAOkC,CAAQ,EAAI7B,EAAAA,SAAuB,IAAI,EAC/C,CAAC8B,EAASC,CAAU,EAAI/B,EAAAA,SAAS,EAAK,EACtC,CAACgC,EAAMC,CAAO,EAAIjC,EAAAA,SAAwB,IAAI,EAEpDkC,EAAAA,UAAU,IAAM,CAeVT,IAde,SAAY,CAC7BM,EAAW,EAAI,EACfE,EAAQ,IAAI,EACZ,GAAI,CACF,MAAME,EAAW,MAAMC,EAASX,CAAG,EACnCI,EAASM,EAAS,IAAI,CAAA,OACfE,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CJ,EAAQ,yBAAyB,CAAA,QACnC,CACEF,EAAW,EAAK,CAAA,CAClB,GAIA,CACF,EACC,CAACN,CAAE,CAAC,EAKP,MAAMa,EAAa,MAAOxC,GAAuB,CAC/C,GAAI,CACF,MAAMyC,EAAYd,EAAK3B,CAAQ,EAC/B0C,EAAM,QAAQ,+BAA+B,EAC7Cb,EAAS,SAAS,CAAA,OACXU,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CG,EAAM,MAAM,0BAA0B,CAAA,CACxC,EAGF,OACEpB,EAAAA,KAAC,MAAA,CAAI,UAAU,0DAEb,SAAA,CAAAE,EAAAA,IAACmB,EAAA,EAAO,EAERrB,EAAAA,KAAC,MAAA,CAAI,UAAU,cAEb,SAAA,CAAAE,EAAAA,IAACoB,EAAA,EAAQ,EAGTtB,EAAAA,KAAC,OAAA,CAAK,UAAU,aACd,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,eAEtE,EAGCQ,GAAWR,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAiB,SAAA,sBAAmB,EAC5DU,GAAQV,EAAAA,IAAC,IAAA,CAAE,UAAU,eAAgB,SAAAU,EAAK,EAG1CrC,GACC2B,EAAAA,IAAC5B,EAAA,CACC,MAAAC,EACA,OAAQ2C,EACR,SAAU,IAAMX,EAAS,SAAS,CAAA,CAAA,CACpC,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}